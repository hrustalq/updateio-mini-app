# React Telegram Mini App Update.io

- [React](https://react.dev/)
- [TypeScript](https://www.typescriptlang.org/)
- [@telegram-apps SDK](https://docs.telegram-mini-apps.com/packages/telegram-apps-sdk)
- [Telegram UI](https://github.com/Telegram-Mini-Apps/TelegramUI)
- [Vite](https://vitejs.dev/)

## Описание приложения

Данное приложение представляет собой Telegram Miniapp, который служит сервисом подписок на обновления по играм. Когда выходит патч-нот, в чат приходит уведомление о выходе с краткой информацией.

Основные функции приложения:
- Управление подпиской на обновления игр
- Отслеживание статистики
- Управление профилем пользователя
- Настройка дополнительных параметров
- Получение уведомлений от системы

## Установка зависимостей

Если вы только что клонировали этот шаблон, вам следует установить зависимости проекта с помощью команды:

```Bash
npm install
```

## Скрипты

Этот проект содержит следующие скрипты:

- `dev`. Запускает приложение в режиме разработки.
- `build`. Собирает приложение для продакшена.
- `lint`. Запускает [eslint](https://eslint.org/) для проверки качества кода на соответствие требуемым стандартам.
- `deploy`. Разворачивает приложение на GitHub Pages.

Для запуска скрипта используйте команду `npm run`:

```Bash
npm run {скрипт}
# Пример: npm run build
```

## Запуск

Хотя Mini Apps предназначены для открытия в [приложениях Telegram](https://docs.telegram-mini-apps.com/platform/about#supported-applications), вы все еще можете разрабатывать и тестировать их вне Telegram в процессе разработки.

Для запуска приложения в режиме разработки используйте скрипт `dev`:

```bash
npm run dev
```

После этого вы увидите в терминале сообщение, похожее на это:

```bash
VITE v5.2.12  ready in 237 ms

➜  Local:   http://localhost:5173/
➜  Network: http://172.18.16.1:5173/
➜  Network: http://172.19.32.1:5173/
➜  Network: http://192.168.0.171:5173/
➜  press h + enter to show help
```

Здесь вы можете увидеть ссылку `Local`, доступную локально, и ссылки `Network`, доступные для всех устройств в той же сети, что и текущее устройство.

Чтобы просмотреть приложение, вам нужно открыть ссылку `Local` (`http://localhost:5173/` в этом примере) в вашем браузере.

Важно отметить, что некоторые библиотеки в этом шаблоне, такие как `@telegram-apps/sdk`, не предназначены для использования вне Telegram.

Тем не менее, они, похоже, работают правильно. Это происходит потому, что файл `src/mockEnv.ts`, который импортируется в точке входа приложения (`src/index.ts`), использует функцию `mockTelegramEnv` для имитации среды Telegram. Этот трюк убеждает приложение, что оно работает в среде на основе Telegram. Поэтому будьте осторожны и не используйте эту функцию в производственном режиме, если вы полностью не понимаете ее последствий.

### Запуск внутри Telegram

Хотя возможно запустить приложение вне Telegram, рекомендуется разрабатывать его внутри Telegram для наиболее точного представления о его реальном функционировании.

Для запуска приложения внутри Telegram [@BotFather](https://t.me/botfather) требует ссылку HTTPS.

Перейдите в файл `vite.config.ts` и раскомментируйте использование функции `basicSsl`. Эта функция использует плагин [@vitejs/plugin-basic-ssl](https://www.npmjs.com/package/@vitejs/plugin-basic-ssl), который позволяет создать ссылку HTTPS. Обратите внимание, что этот плагин генерирует самоподписанный сертификат, который браузеры будут распознавать как небезопасный, что приведет к предупреждению при доступе к приложению.

После раскомментирования функции снова запустите скрипт `dev` и посмотрите на вывод в терминале:

```bash
VITE v5.2.12  ready in 265 ms

➜  Local:   https://localhost:5173/
➜  Network: https://172.18.16.1:5173/
➜  Network: https://172.19.32.1:5173/
➜  Network: https://192.168.0.171:5173/
➜  press h + enter to show help
```

При посещении ссылки `Local` (`https://localhost:5173` в этом примере) в вашем браузере вы увидите следующее предупреждение:

Это предупреждение браузера нормально и его можно безопасно игнорировать, если вы уверены в безопасности сайта. Нажмите кнопку "Перейти на localhost (небезопасно)", чтобы продолжить и просмотреть приложение.

После того, как приложение отобразится корректно, отправьте одну из ссылок `Network` в качестве ссылки на Mini App [@BotFather](https://t.me/botfather). Затем перейдите на [https://web.telegram.org/k/](https://web.telegram.org/k/), найдите вашего бота и запустите Telegram Mini App. Этот подход обеспечивает полный опыт разработки.

> **Важно**
>
> Поскольку мы используем самоподписанные SSL-сертификаты, приложения Telegram для Android и iOS не смогут отобразить приложение. Эти операционные системы применяют более строгие меры безопасности, предотвращая загрузку Mini App. Чтобы решить эту проблему, обратитесь к [этому руководству](https://docs.telegram-mini-apps.com/platform/getting-app-link#remote).

## Полезные ссылки

- [Документация платформы](https://docs.telegram-mini-apps.com/)
- [Документация @telegram-apps/sdk-react](https://docs.telegram-mini-apps.com/packages/telegram-apps-sdk-react)
- [Чат сообщества разработчиков Telegram](https://t.me/devs)